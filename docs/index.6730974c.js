var e,t,n,l,i,r,o={},s=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function u(e,t){for(var n in t)e[n]=t[n];return e}function c(e){var t=e.parentNode;t&&t.removeChild(e)}function a(e,l,i,r,o){var s={type:e,props:l,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++n:o};return null!=t.vnode&&t.vnode(s),s}function h(e){return e.children}function d(e,t){this.props=e,this.context=t}function p(e,t){if(null==t)return e.__?p(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?p(e):null}function f(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return f(e)}}function m(e){(!e.__d&&(e.__d=!0)&&l.push(e)&&!g.__r++||r!==t.debounceRendering)&&((r=t.debounceRendering)||i)(g)}function g(){for(var e;g.__r=l.length;)e=l.sort((function(e,t){return e.__v.__b-t.__v.__b})),l=[],e.some((function(e){var t,n,l,i,r,o;e.__d&&(r=(i=(t=e).__v).__e,(o=t.__P)&&(n=[],(l=u({},i)).__v=i.__v+1,P(o,i,l,t.__n,void 0!==o.ownerSVGElement,null!=i.__h?[r]:null,n,null==r?p(i):r,i.__h),F(n,i),i.__e!=r&&f(i)))}))}function v(e,t,n,l,i,r,_,u,c,d){var f,m,g,v,b,k,x,E=l&&l.__k||s,F=E.length;for(n.__k=[],f=0;f<t.length;f++)if(null!=(v=n.__k[f]=null==(v=t[f])||"boolean"==typeof v?null:"string"==typeof v||"number"==typeof v||"bigint"==typeof v?a(null,v,null,null,v):Array.isArray(v)?a(h,{children:v},null,null,null):v.__b>0?a(v.type,v.props,v.key,null,v.__v):v)){if(v.__=n,v.__b=n.__b+1,null===(g=E[f])||g&&v.key==g.key&&v.type===g.type)E[f]=void 0;else for(m=0;m<F;m++){if((g=E[m])&&v.key==g.key&&v.type===g.type){E[m]=void 0;break}g=null}P(e,v,g=g||o,i,r,_,u,c,d),b=v.__e,(m=v.ref)&&g.ref!=m&&(x||(x=[]),g.ref&&x.push(g.ref,null,v),x.push(m,v.__c||b,v)),null!=b?(null==k&&(k=b),"function"==typeof v.type&&null!=v.__k&&v.__k===g.__k?v.__d=c=y(v,c,e):c=w(e,v,g,E,b,c),d||"option"!==n.type?"function"==typeof n.type&&(n.__d=c):e.value=""):c&&g.__e==c&&c.parentNode!=e&&(c=p(g))}for(n.__e=k,f=F;f--;)null!=E[f]&&("function"==typeof n.type&&null!=E[f].__e&&E[f].__e==n.__d&&(n.__d=p(l,f+1)),C(E[f],E[f]));if(x)for(f=0;f<x.length;f++)S(x[f],x[++f],x[++f])}function y(e,t,n){var l,i;for(l=0;l<e.__k.length;l++)(i=e.__k[l])&&(i.__=e,t="function"==typeof i.type?y(i,t,n):w(n,i,i,e.__k,i.__e,t));return t}function w(e,t,n,l,i,r){var o,s,_;if(void 0!==t.__d)o=t.__d,t.__d=void 0;else if(null==n||i!=r||null==i.parentNode)e:if(null==r||r.parentNode!==e)e.appendChild(i),o=null;else{for(s=r,_=0;(s=s.nextSibling)&&_<l.length;_+=2)if(s==i)break e;e.insertBefore(i,r),o=r}return void 0!==o?o:i.nextSibling}function b(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||_.test(t)?n:n+"px"}function k(e,t,n,l,i){var r;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof l&&(e.style.cssText=l=""),l)for(t in l)n&&t in n||b(e.style,t,"");if(n)for(t in n)l&&n[t]===l[t]||b(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?l||e.addEventListener(t,r?E:x,r):e.removeEventListener(t,r?E:x,r);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function x(e){this.l[e.type+!1](t.event?t.event(e):e)}function E(e){this.l[e.type+!0](t.event?t.event(e):e)}function P(n,l,i,r,s,_,a,f,m){var g,y,w,b,x,E,P,F,S,C,R,D=l.type;if(void 0!==l.constructor)return null;null!=i.__h&&(m=i.__h,f=l.__e=i.__e,l.__h=null,_=[f]),(g=t.__b)&&g(l);try{e:if("function"==typeof D){if(F=l.props,S=(g=D.contextType)&&r[g.__c],C=g?S?S.props.value:g.__:r,i.__c?P=(y=l.__c=i.__c).__=y.__E:("prototype"in D&&D.prototype.render?l.__c=y=new D(F,C):(l.__c=y=new d(F,C),y.constructor=D,y.render=M),S&&S.sub(y),y.props=F,y.state||(y.state={}),y.context=C,y.__n=r,w=y.__d=!0,y.__h=[]),null==y.__s&&(y.__s=y.state),null!=D.getDerivedStateFromProps&&(y.__s==y.state&&(y.__s=u({},y.__s)),u(y.__s,D.getDerivedStateFromProps(F,y.__s))),b=y.props,x=y.state,w)null==D.getDerivedStateFromProps&&null!=y.componentWillMount&&y.componentWillMount(),null!=y.componentDidMount&&y.__h.push(y.componentDidMount);else{if(null==D.getDerivedStateFromProps&&F!==b&&null!=y.componentWillReceiveProps&&y.componentWillReceiveProps(F,C),!y.__e&&null!=y.shouldComponentUpdate&&!1===y.shouldComponentUpdate(F,y.__s,C)||l.__v===i.__v){y.props=F,y.state=y.__s,l.__v!==i.__v&&(y.__d=!1),y.__v=l,l.__e=i.__e,l.__k=i.__k,l.__k.forEach((function(e){e&&(e.__=l)})),y.__h.length&&a.push(y);break e}null!=y.componentWillUpdate&&y.componentWillUpdate(F,y.__s,C),null!=y.componentDidUpdate&&y.__h.push((function(){y.componentDidUpdate(b,x,E)}))}y.context=C,y.props=F,y.state=y.__s,(g=t.__r)&&g(l),y.__d=!1,y.__v=l,y.__P=n,g=y.render(y.props,y.state,y.context),y.state=y.__s,null!=y.getChildContext&&(r=u(u({},r),y.getChildContext())),w||null==y.getSnapshotBeforeUpdate||(E=y.getSnapshotBeforeUpdate(b,x)),R=null!=g&&g.type===h&&null==g.key?g.props.children:g,v(n,Array.isArray(R)?R:[R],l,i,r,s,_,a,f,m),y.base=l.__e,l.__h=null,y.__h.length&&a.push(y),P&&(y.__E=y.__=null),y.__e=!1}else null==_&&l.__v===i.__v?(l.__k=i.__k,l.__e=i.__e):l.__e=function(t,n,l,i,r,s,_,u){var a,h,d,f=l.props,m=n.props,g=n.type,y=0;if("svg"===g&&(r=!0),null!=s)for(;y<s.length;y++)if((a=s[y])&&(a===t||(g?a.localName==g:3==a.nodeType))){t=a,s[y]=null;break}if(null==t){if(null===g)return document.createTextNode(m);t=r?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,m.is&&m),s=null,u=!1}if(null===g)f===m||u&&t.data===m||(t.data=m);else{if(s=s&&e.call(t.childNodes),h=(f=l.props||o).dangerouslySetInnerHTML,d=m.dangerouslySetInnerHTML,!u){if(null!=s)for(f={},y=0;y<t.attributes.length;y++)f[t.attributes[y].name]=t.attributes[y].value;(d||h)&&(d&&(h&&d.__html==h.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}if(function(e,t,n,l,i){var r;for(r in n)"children"===r||"key"===r||r in t||k(e,r,null,n[r],l);for(r in t)i&&"function"!=typeof t[r]||"children"===r||"key"===r||"value"===r||"checked"===r||n[r]===t[r]||k(e,r,t[r],n[r],l)}(t,m,f,r,u),d)n.__k=[];else if(y=n.props.children,v(t,Array.isArray(y)?y:[y],n,l,i,r&&"foreignObject"!==g,s,_,s?s[0]:l.__k&&p(l,0),u),null!=s)for(y=s.length;y--;)null!=s[y]&&c(s[y]);u||("value"in m&&void 0!==(y=m.value)&&(y!==t.value||"progress"===g&&!y)&&k(t,"value",y,f.value,!1),"checked"in m&&void 0!==(y=m.checked)&&y!==t.checked&&k(t,"checked",y,f.checked,!1))}return t}(i.__e,l,i,r,s,_,a,m);(g=t.diffed)&&g(l)}catch(e){l.__v=null,(m||null!=_)&&(l.__e=f,l.__h=!!m,_[_.indexOf(f)]=null),t.__e(e,l,i)}}function F(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function S(e,n,l){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,l)}}function C(e,n,l){var i,r;if(t.unmount&&t.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||S(i,null,n)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){t.__e(e,n)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&C(i[r],n,"function"!=typeof e.type);l||null==e.__e||c(e.__e),e.__e=e.__d=void 0}function M(e,t,n){return this.constructor(e,n)}function R(n,l,i){var r,s,_;t.__&&t.__(n,l),s=(r="function"==typeof i)?null:i&&i.__k||l.__k,_=[],P(l,n=(!r&&i||l).__k=function(t,n,l){var i,r,o,s={};for(o in n)"key"==o?i=n[o]:"ref"==o?r=n[o]:s[o]=n[o];if(arguments.length>2&&(s.children=arguments.length>3?e.call(arguments,2):l),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===s[o]&&(s[o]=t.defaultProps[o]);return a(t,s,i,r,null)}(h,null,[n]),s||o,o,void 0!==l.ownerSVGElement,!r&&i?[i]:s?null:l.firstChild?e.call(l.childNodes):null,_,!r&&i?i:s?s.__e:l.firstChild,r),F(_,n)}e=s.slice,t={__e:function(e,t){for(var n,l,i;t=t.__;)if((n=t.__c)&&!n.__)try{if((l=n.constructor)&&null!=l.getDerivedStateFromError&&(n.setState(l.getDerivedStateFromError(e)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),i=n.__d),i)return n.__E=n}catch(t){e=t}throw e}},n=0,d.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=u({},this.state),"function"==typeof e&&(e=e(u({},n),this.props)),e&&u(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),m(this))},d.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),m(this))},d.prototype.render=h,l=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0;var D=0;function j(e,n,l,i,r){var o,s,_={};for(s in n)"ref"==s?o=n[s]:_[s]=n[s];var u={type:e,props:_,key:l,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--D,__source:i,__self:r};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===_[s]&&(_[s]=o[s]);return t.vnode&&t.vnode(u),u}const L=["samples/1.jpg","samples/2.jpg","samples/3.jpg","samples/4.jpg","samples/5.jpg","samples/6.jpg","samples/7.jpg","samples/8.jpg","samples/9.jpg","samples/10.jpg","samples/11.jpg","samples/12.jpg","samples/13.jpg"];class U extends d{render({src:e,aspectRatio:t,top:n,left:l,width:i,height:r}){return j("li",{style:{top:n,left:l,width:i,height:r,backgroundImage:`url(./${e})`}})}}const z=(e,t)=>{for(let n=0;n<e.length;n++)t[n]=e[n]},A=(e,t,n)=>{let l=(e=>{let t,n,l=e.length,i=Math.floor,r=Math.random;for(;0!==l;)n=i(r()*l),l-=1,t=e[l],e[l]=e[n],e[n]=t;return e})(e.slice(t,n));return z(l,e)},T=(e,t,n,l)=>{let i,r,o,s,_=Math.min,u=Math.max;for(let c=n-2;c>=0;c--)if(s=c<<1,i=e[s],r=e[s+1],o=e[n+c],i.x=o.x,i.y=o.y,t&1<<c?(i.width=o.width,i.height=i.aspectRatio?o.width/i.aspectRatio:0,r.x=o.x,r.y=o.y+i.height,r.width=o.width,r.height=o.height-i.height):(i.width=o.height*i.aspectRatio,i.height=o.height,r.x=o.x+i.width,r.y=o.y,r.width=o.width-i.width,r.height=o.height),s<n){let e=i.width+i.height,t=r.width+r.height;i.dummy||(l.min=_(l.min,e)),r.dummy||(l.min=_(l.min,t)),l.max=u(l.max,e,t)}},N=(e,t,n,l)=>{const i=999999999;let r,o,s,_,u,c,a,h,d,p,f,m,g,v=e/t,y=(S=n.length,S--,S|=S>>1,S|=S>>2,S|=S>>4,S|=S>>8,S|=S>>16,S|=S>>32,++S),w=(F=(y<<1)-1,Array.apply(null,Array(F)).map((()=>({x:0,y:0,width:0,height:0,aspectRatio:0,dummy:!0})))),b={},k=(new Date).getTime()+l,x=i,E=.05,P=n.map(((e,t)=>({x:0,y:0,width:0,height:0,index:t,aspectRatio:e,dummy:!1})));var F,S;y<=5&&(E=i);for(z(P,w),_=1<<y;Date.now()<k;)if(C=0,M=_,C=Math.ceil(C),M=Math.floor(M),r=Math.floor(Math.random()*(M-C))+C,!b[r]){for(b[r]=!0,A(w,0,y),p=0,f=y-1;p<f;p++)g=p<<1,a=w[g].aspectRatio,h=w[g+1].aspectRatio,0!==a&&0!==h?(d=a+h,r&1<<p&&(d=a*h/d)):d=a||h,w[p+y].aspectRatio=d;if(u=v>d,o=u?v/d-1:1-v/d,o<E){m=w[w.length-1],m.width=u?t*d:e,m.height=u?t:e/d,c={min:i,max:-i},T(w,r,y,c);let n=o+(1-c.min/c.max);if(n<x){x=n,s=w.slice(0,y).filter((e=>!e.dummy)).map((e=>({x:e.x,y:e.y,index:e.index,width:e.width,height:e.height})));{let n=e/m.width,l=t/m.height;s=s.map((e=>({x:e.x*n,y:e.y*l,index:e.index,width:e.width*n,height:e.height*l})))}}}}var C,M;return s};var q={};
/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/!function(){var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},t=q,n=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,i=n.length,r={};l<i;l++)if((t=n[l])&&t[1]in e){for(l=0;l<t.length;l++)r[n[0][l]]=t[l];return r}return!1}(),l={change:n.fullscreenchange,error:n.fullscreenerror},i={request:function(t,l){return new Promise(function(i,r){var o=function(){this.off("change",o),i()}.bind(this);this.on("change",o);var s=(t=t||e.documentElement)[n.requestFullscreen](l);s instanceof Promise&&s.then(o).catch(r)}.bind(this))},exit:function(){return new Promise(function(t,l){if(this.isFullscreen){var i=function(){this.off("change",i),t()}.bind(this);this.on("change",i);var r=e[n.exitFullscreen]();r instanceof Promise&&r.then(i).catch(l)}else t()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(t,n){var i=l[t];i&&e.addEventListener(i,n,!1)},off:function(t,n){var i=l[t];i&&e.removeEventListener(i,n,!1)},raw:n};n?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(e[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(e[n.fullscreenEnabled])}}}),t?q=i:window.screenfull=i):t?q={isEnabled:!1}:window.screenfull={isEnabled:!1}}();class W extends d{constructor(e){super(e),this.resizing=!1,this.crop=()=>{this.setState({showCrop:!this.state.showCrop}),this.forceUpdate()},this.recalc=()=>{this.calculatePositions()},this.add=()=>{this.setState({images:Math.min(this.props.images.length,this.state.images+1)}),this.calculatePositions()},this.remove=()=>{this.setState({images:Math.max(5,this.state.images-1)}),this.calculatePositions()},this.state={showCrop:!1,tileProps:[],images:9}}componentDidMount(){this.calculatePositions(),window.addEventListener("resize",(()=>this.calculatePositions()))}calculatePositions(){if(this.resizing)return;const e=this.base;this.resizing=!0;let t=e.clientWidth,n=e.clientHeight,l=this.props.images.slice(0,this.state.images),i=[];do{i=N(t,n,l.map((e=>e.aspectRatio)),100)}while(!i);requestAnimationFrame((()=>{this.setState({tileProps:i.sort(((e,t)=>e.index-t.index)).map((e=>({src:this.props.images[e.index].src,aspectRatio:this.props.images[e.index].aspectRatio,top:e.y,left:e.x,width:e.width,height:e.height})))}),this.resizing=!1,this.forceUpdate()}))}shouldComponentUpdate(){return!1}render(e,{tileProps:t,showCrop:n,images:l,...i}){return j("div",{className:"diorama "+(n?"crop":""),children:[j("ul",{children:t.map((e=>j(U,{...e})))}),j("nav",{children:[j("button",{class:"calc",onClick:()=>this.recalc(),children:"Recalculate"}),j("button",{class:"crop-toggle",onClick:()=>this.crop(),children:"Show crop"}),j("button",{class:"fullscreen",onClick:()=>{q.isEnabled&&q.request()},children:"Fullscreen"}),j("button",{class:"add-image",onClick:()=>this.add(),children:"Add"}),j("button",{class:"del-image",onClick:()=>this.remove(),children:"Remove"})]})]})}}const H=()=>new Promise((e=>{document.addEventListener("DOMContentLoaded",e)})),I=e=>new Promise((t=>{const n=new Image;n.addEventListener("load",(()=>t({src:e,aspectRatio:n.width/n.height}))),n.src=e}));(async()=>{const[,...e]=await Promise.all([H,...L.map(I)]);R(j(W,{images:e}),document.body)})();
//# sourceMappingURL=index.6730974c.js.map
