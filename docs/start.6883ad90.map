{"version":3,"sources":["images.ts","..\\node_modules\\preact\\dist\\preact.esm.js","tile.tsx","..\\node_modules\\screenfull\\dist\\screenfull.js","layout.ts","diorama.tsx","start.tsx"],"names":["VNode","options","stack","EMPTY_CHILDREN","h","nodeName","attributes","children","lastSimple","child","simple","i","arguments","length","push","pop","undefined","String","p","key","vnode","extend","obj","props","defer","Promise","resolve","then","bind","setTimeout","cloneElement","slice","call","IS_NON_DIMENSIONAL","items","enqueueRender","component","_dirty","debounceRendering","rerender","list","renderComponent","isSameNodeType","node","hydrating","splitText","_componentConstructor","isNamedNode","normalizedNodeName","toLowerCase","getNodeProps","defaultProps","createNode","isSvg","document","createElementNS","createElement","removeNode","parentNode","removeChild","setAccessor","name","old","value","className","style","cssText","test","innerHTML","__html","useCapture","replace","substring","addEventListener","eventProxy","removeEventListener","_listeners","setProperty","removeAttribute","ns","removeAttributeNS","setAttributeNS","setAttribute","e","type","event","mounts","diffLevel","isSvgMode","flushMounts","c","afterMount","componentDidMount","diff","dom","context","mountAll","parent","componentRoot","ownerSVGElement","ret","idiff","appendChild","out","prevSvgMode","_component","nodeValue","createTextNode","replaceChild","recollectNodeTree","vnodeName","buildComponentFromVNode","firstChild","fc","vchildren","a","nextSibling","innerDiffNode","dangerouslySetInnerHTML","diffAttributes","isHydrating","originalChildren","childNodes","keyed","keyedLen","min","len","childrenLen","vlen","j","f","vchild","_child","__key","trim","insertBefore","unmountOnly","unmountComponent","ref","removeChildren","lastChild","next","previousSibling","attrs","components","collectComponent","constructor","createComponent","Ctor","inst","prototype","render","Component","doRender","nextBase","splice","state","setComponentProps","opts","_disable","__ref","base","componentWillMount","componentWillReceiveProps","prevContext","prevProps","syncComponentUpdates","isChild","previousProps","previousState","prevState","previousContext","isUpdate","initialBase","initialChildComponent","skip","rendered","cbase","shouldComponentUpdate","componentWillUpdate","getChildContext","childComponent","toUnmount","childProps","_parentComponent","baseParent","componentRef","t","unshift","componentDidUpdate","afterUpdate","_renderCallbacks","originalComponent","oldDom","isDirectOwner","isOwner","beforeUnmount","componentWillUnmount","inner","setState","callback","s","forceUpdate","merge","preact","window","isCommonjs","module","exports","keyboardAllowed","Element","fn","val","fnMap","l","eventNameMap","change","fullscreenchange","error","fullscreenerror","screenfull","request","elem","requestFullscreen","documentElement","navigator","userAgent","ALLOW_KEYBOARD_INPUT","exit","exitFullscreen","toggle","isFullscreen","onchange","on","onerror","eventName","off","raw","Object","defineProperties","get","Boolean","fullscreenElement","element","enumerable","enabled","fullscreenEnabled"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"start.6883ad90.map","sourceRoot":"..\\src","sourcesContent":["export const images = [\n    'samples/1.jpg',\n    'samples/2.jpg',\n    'samples/3.jpg',\n    'samples/4.jpg',\n    'samples/5.jpg',\n    'samples/6.jpg',\n    'samples/7.jpg',\n    'samples/8.jpg',\n    'samples/9.jpg',\n    'samples/10.jpg',\n    'samples/11.jpg',\n    'samples/12.jpg',\n    'samples/13.jpg'\n]\n","/** Virtual DOM Node */\nfunction VNode() {}\n\n/** Global options\n *\t@public\n *\t@namespace options {Object}\n */\nvar options = {\n\n\t/** If `true`, `prop` changes trigger synchronous component updates.\n  *\t@name syncComponentUpdates\n  *\t@type Boolean\n  *\t@default true\n  */\n\t//syncComponentUpdates: true,\n\n\t/** Processes all created VNodes.\n  *\t@param {VNode} vnode\tA newly-created VNode to normalize/process\n  */\n\t//vnode(vnode) { }\n\n\t/** Hook invoked after a component is mounted. */\n\t// afterMount(component) { }\n\n\t/** Hook invoked after the DOM is updated with a component's latest render. */\n\t// afterUpdate(component) { }\n\n\t/** Hook invoked immediately before a component is unmounted. */\n\t// beforeUnmount(component) { }\n};\n\nvar stack = [];\n\nvar EMPTY_CHILDREN = [];\n\n/**\n * JSX/hyperscript reviver.\n * @see http://jasonformat.com/wtf-is-jsx\n * Benchmarks: https://esbench.com/bench/57ee8f8e330ab09900a1a1a0\n *\n * Note: this is exported as both `h()` and `createElement()` for compatibility reasons.\n *\n * Creates a VNode (virtual DOM element). A tree of VNodes can be used as a lightweight representation\n * of the structure of a DOM tree. This structure can be realized by recursively comparing it against\n * the current _actual_ DOM structure, and applying only the differences.\n *\n * `h()`/`createElement()` accepts an element name, a list of attributes/props,\n * and optionally children to append to the element.\n *\n * @example The following DOM tree\n *\n * `<div id=\"foo\" name=\"bar\">Hello!</div>`\n *\n * can be constructed using this function as:\n *\n * `h('div', { id: 'foo', name : 'bar' }, 'Hello!');`\n *\n * @param {string} nodeName\tAn element name. Ex: `div`, `a`, `span`, etc.\n * @param {Object} attributes\tAny attributes/props to set on the created element.\n * @param rest\t\t\tAdditional arguments are taken to be children to append. Can be infinitely nested Arrays.\n *\n * @public\n */\nfunction h(nodeName, attributes) {\n\tvar children = EMPTY_CHILDREN,\n\t    lastSimple,\n\t    child,\n\t    simple,\n\t    i;\n\tfor (i = arguments.length; i-- > 2;) {\n\t\tstack.push(arguments[i]);\n\t}\n\tif (attributes && attributes.children != null) {\n\t\tif (!stack.length) stack.push(attributes.children);\n\t\tdelete attributes.children;\n\t}\n\twhile (stack.length) {\n\t\tif ((child = stack.pop()) && child.pop !== undefined) {\n\t\t\tfor (i = child.length; i--;) {\n\t\t\t\tstack.push(child[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof child === 'boolean') child = null;\n\n\t\t\tif (simple = typeof nodeName !== 'function') {\n\t\t\t\tif (child == null) child = '';else if (typeof child === 'number') child = String(child);else if (typeof child !== 'string') simple = false;\n\t\t\t}\n\n\t\t\tif (simple && lastSimple) {\n\t\t\t\tchildren[children.length - 1] += child;\n\t\t\t} else if (children === EMPTY_CHILDREN) {\n\t\t\t\tchildren = [child];\n\t\t\t} else {\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\n\t\t\tlastSimple = simple;\n\t\t}\n\t}\n\n\tvar p = new VNode();\n\tp.nodeName = nodeName;\n\tp.children = children;\n\tp.attributes = attributes == null ? undefined : attributes;\n\tp.key = attributes == null ? undefined : attributes.key;\n\n\t// if a \"vnode hook\" is defined, pass every created VNode to it\n\tif (options.vnode !== undefined) options.vnode(p);\n\n\treturn p;\n}\n\n/**\n *  Copy all properties from `props` onto `obj`.\n *  @param {Object} obj\t\tObject onto which properties should be copied.\n *  @param {Object} props\tObject from which to copy properties.\n *  @returns obj\n *  @private\n */\nfunction extend(obj, props) {\n  for (var i in props) {\n    obj[i] = props[i];\n  }return obj;\n}\n\n/**\n * Call a function asynchronously, as soon as possible. Makes\n * use of HTML Promise to schedule the callback if available,\n * otherwise falling back to `setTimeout` (mainly for IE<11).\n *\n * @param {Function} callback\n */\nvar defer = typeof Promise == 'function' ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {VNode} vnode\t\tThe virtual DOM element to clone\n * @param {Object} props\tAttributes/props to add when cloning\n * @param {VNode} rest\t\tAny additional arguments will be used as replacement children.\n */\nfunction cloneElement(vnode, props) {\n  return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n}\n\n// DOM properties that should NOT have \"px\" added when numeric\nvar IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n\n/** Managed queue of dirty components to be re-rendered */\n\nvar items = [];\n\nfunction enqueueRender(component) {\n\tif (!component._dirty && (component._dirty = true) && items.push(component) == 1) {\n\t\t(options.debounceRendering || defer)(rerender);\n\t}\n}\n\nfunction rerender() {\n\tvar p,\n\t    list = items;\n\titems = [];\n\twhile (p = list.pop()) {\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n\n/**\n * Check if two nodes are equivalent.\n *\n * @param {Node} node\t\t\tDOM Node to compare\n * @param {VNode} vnode\t\t\tVirtual DOM node to compare\n * @param {boolean} [hydrating=false]\tIf true, ignores component constructors when comparing.\n * @private\n */\nfunction isSameNodeType(node, vnode, hydrating) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return node.splitText !== undefined;\n  }\n  if (typeof vnode.nodeName === 'string') {\n    return !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n  }\n  return hydrating || node._componentConstructor === vnode.nodeName;\n}\n\n/**\n * Check if an Element has a given nodeName, case-insensitively.\n *\n * @param {Element} node\tA DOM Element to inspect the name of.\n * @param {String} nodeName\tUnnormalized name to compare against.\n */\nfunction isNamedNode(node, nodeName) {\n  return node.normalizedNodeName === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();\n}\n\n/**\n * Reconstruct Component-style `props` from a VNode.\n * Ensures default/fallback values from `defaultProps`:\n * Own-properties of `defaultProps` not present in `vnode.attributes` are added.\n *\n * @param {VNode} vnode\n * @returns {Object} props\n */\nfunction getNodeProps(vnode) {\n  var props = extend({}, vnode.attributes);\n  props.children = vnode.children;\n\n  var defaultProps = vnode.nodeName.defaultProps;\n  if (defaultProps !== undefined) {\n    for (var i in defaultProps) {\n      if (props[i] === undefined) {\n        props[i] = defaultProps[i];\n      }\n    }\n  }\n\n  return props;\n}\n\n/** Create an element with the given nodeName.\n *\t@param {String} nodeName\n *\t@param {Boolean} [isSvg=false]\tIf `true`, creates an element within the SVG namespace.\n *\t@returns {Element} node\n */\nfunction createNode(nodeName, isSvg) {\n\tvar node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);\n\tnode.normalizedNodeName = nodeName;\n\treturn node;\n}\n\n/** Remove a child node from its parent if attached.\n *\t@param {Element} node\t\tThe node to remove\n */\nfunction removeNode(node) {\n\tvar parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\n/** Set a named attribute on the given Node, with special behavior for some names and event handlers.\n *\tIf `value` is `null`, the attribute/handler will be removed.\n *\t@param {Element} node\tAn element to mutate\n *\t@param {string} name\tThe name/key to set, such as an event or attribute name\n *\t@param {any} old\tThe last value that was set for this name/node pair\n *\t@param {any} value\tAn attribute value, such as a function to be used as an event handler\n *\t@param {Boolean} isSvg\tAre we currently diffing inside an svg?\n *\t@private\n */\nfunction setAccessor(node, name, old, value, isSvg) {\n\tif (name === 'className') name = 'class';\n\n\tif (name === 'key') {\n\t\t// ignore\n\t} else if (name === 'ref') {\n\t\tif (old) old(null);\n\t\tif (value) value(node);\n\t} else if (name === 'class' && !isSvg) {\n\t\tnode.className = value || '';\n\t} else if (name === 'style') {\n\t\tif (!value || typeof value === 'string' || typeof old === 'string') {\n\t\t\tnode.style.cssText = value || '';\n\t\t}\n\t\tif (value && typeof value === 'object') {\n\t\t\tif (typeof old !== 'string') {\n\t\t\t\tfor (var i in old) {\n\t\t\t\t\tif (!(i in value)) node.style[i] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i in value) {\n\t\t\t\tnode.style[i] = typeof value[i] === 'number' && IS_NON_DIMENSIONAL.test(i) === false ? value[i] + 'px' : value[i];\n\t\t\t}\n\t\t}\n\t} else if (name === 'dangerouslySetInnerHTML') {\n\t\tif (value) node.innerHTML = value.__html || '';\n\t} else if (name[0] == 'o' && name[1] == 'n') {\n\t\tvar useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tname = name.toLowerCase().substring(2);\n\t\tif (value) {\n\t\t\tif (!old) node.addEventListener(name, eventProxy, useCapture);\n\t\t} else {\n\t\t\tnode.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t\t(node._listeners || (node._listeners = {}))[name] = value;\n\t} else if (name !== 'list' && name !== 'type' && !isSvg && name in node) {\n\t\tsetProperty(node, name, value == null ? '' : value);\n\t\tif (value == null || value === false) node.removeAttribute(name);\n\t} else {\n\t\tvar ns = isSvg && name !== (name = name.replace(/^xlink:?/, ''));\n\t\tif (value == null || value === false) {\n\t\t\tif (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase());else node.removeAttribute(name);\n\t\t} else if (typeof value !== 'function') {\n\t\t\tif (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value);else node.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/** Attempt to set a DOM property to the given value.\n *\tIE & FF throw for certain property-value combinations.\n */\nfunction setProperty(node, name, value) {\n\ttry {\n\t\tnode[name] = value;\n\t} catch (e) {}\n}\n\n/** Proxy an event to hooked event handlers\n *\t@private\n */\nfunction eventProxy(e) {\n\treturn this._listeners[e.type](options.event && options.event(e) || e);\n}\n\n/** Queue of components that have been mounted and are awaiting componentDidMount */\nvar mounts = [];\n\n/** Diff recursion count, used to track the end of the diff cycle. */\nvar diffLevel = 0;\n\n/** Global flag indicating if the diff is currently within an SVG */\nvar isSvgMode = false;\n\n/** Global flag indicating if the diff is performing hydration */\nvar hydrating = false;\n\n/** Invoke queued componentDidMount lifecycle methods */\nfunction flushMounts() {\n\tvar c;\n\twhile (c = mounts.pop()) {\n\t\tif (options.afterMount) options.afterMount(c);\n\t\tif (c.componentDidMount) c.componentDidMount();\n\t}\n}\n\n/** Apply differences in a given vnode (and it's deep children) to a real DOM Node.\n *\t@param {Element} [dom=null]\t\tA DOM node to mutate into the shape of the `vnode`\n *\t@param {VNode} vnode\t\t\tA VNode (with descendants forming a tree) representing the desired DOM structure\n *\t@returns {Element} dom\t\t\tThe created/mutated element\n *\t@private\n */\nfunction diff(dom, vnode, context, mountAll, parent, componentRoot) {\n\t// diffLevel having been 0 here indicates initial entry into the diff (not a subdiff)\n\tif (!diffLevel++) {\n\t\t// when first starting the diff, check if we're diffing an SVG or within an SVG\n\t\tisSvgMode = parent != null && parent.ownerSVGElement !== undefined;\n\n\t\t// hydration is indicated by the existing element to be diffed not having a prop cache\n\t\thydrating = dom != null && !('__preactattr_' in dom);\n\t}\n\n\tvar ret = idiff(dom, vnode, context, mountAll, componentRoot);\n\n\t// append the element if its a new parent\n\tif (parent && ret.parentNode !== parent) parent.appendChild(ret);\n\n\t// diffLevel being reduced to 0 means we're exiting the diff\n\tif (! --diffLevel) {\n\t\thydrating = false;\n\t\t// invoke queued componentDidMount lifecycle methods\n\t\tif (!componentRoot) flushMounts();\n\t}\n\n\treturn ret;\n}\n\n/** Internals of `diff()`, separated to allow bypassing diffLevel / mount flushing. */\nfunction idiff(dom, vnode, context, mountAll, componentRoot) {\n\tvar out = dom,\n\t    prevSvgMode = isSvgMode;\n\n\t// empty values (null, undefined, booleans) render as empty Text nodes\n\tif (vnode == null || typeof vnode === 'boolean') vnode = '';\n\n\t// Fast case: Strings & Numbers create/update Text nodes.\n\tif (typeof vnode === 'string' || typeof vnode === 'number') {\n\n\t\t// update if it's already a Text node:\n\t\tif (dom && dom.splitText !== undefined && dom.parentNode && (!dom._component || componentRoot)) {\n\t\t\t/* istanbul ignore if */ /* Browser quirk that can't be covered: https://github.com/developit/preact/commit/fd4f21f5c45dfd75151bd27b4c217d8003aa5eb9 */\n\t\t\tif (dom.nodeValue != vnode) {\n\t\t\t\tdom.nodeValue = vnode;\n\t\t\t}\n\t\t} else {\n\t\t\t// it wasn't a Text node: replace it with one and recycle the old Element\n\t\t\tout = document.createTextNode(vnode);\n\t\t\tif (dom) {\n\t\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\t\t\t\trecollectNodeTree(dom, true);\n\t\t\t}\n\t\t}\n\n\t\tout['__preactattr_'] = true;\n\n\t\treturn out;\n\t}\n\n\t// If the VNode represents a Component, perform a component diff:\n\tvar vnodeName = vnode.nodeName;\n\tif (typeof vnodeName === 'function') {\n\t\treturn buildComponentFromVNode(dom, vnode, context, mountAll);\n\t}\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvgMode = vnodeName === 'svg' ? true : vnodeName === 'foreignObject' ? false : isSvgMode;\n\n\t// If there's no existing element or it's the wrong type, create a new one:\n\tvnodeName = String(vnodeName);\n\tif (!dom || !isNamedNode(dom, vnodeName)) {\n\t\tout = createNode(vnodeName, isSvgMode);\n\n\t\tif (dom) {\n\t\t\t// move children into the replacement node\n\t\t\twhile (dom.firstChild) {\n\t\t\t\tout.appendChild(dom.firstChild);\n\t\t\t} // if the previous Element was mounted into the DOM, replace it inline\n\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\n\t\t\t// recycle the old element (skips non-Element node types)\n\t\t\trecollectNodeTree(dom, true);\n\t\t}\n\t}\n\n\tvar fc = out.firstChild,\n\t    props = out['__preactattr_'],\n\t    vchildren = vnode.children;\n\n\tif (props == null) {\n\t\tprops = out['__preactattr_'] = {};\n\t\tfor (var a = out.attributes, i = a.length; i--;) {\n\t\t\tprops[a[i].name] = a[i].value;\n\t\t}\n\t}\n\n\t// Optimization: fast-path for elements containing a single TextNode:\n\tif (!hydrating && vchildren && vchildren.length === 1 && typeof vchildren[0] === 'string' && fc != null && fc.splitText !== undefined && fc.nextSibling == null) {\n\t\tif (fc.nodeValue != vchildren[0]) {\n\t\t\tfc.nodeValue = vchildren[0];\n\t\t}\n\t}\n\t// otherwise, if there are existing or new children, diff them:\n\telse if (vchildren && vchildren.length || fc != null) {\n\t\t\tinnerDiffNode(out, vchildren, context, mountAll, hydrating || props.dangerouslySetInnerHTML != null);\n\t\t}\n\n\t// Apply attributes/props from VNode to the DOM Element:\n\tdiffAttributes(out, vnode.attributes, props);\n\n\t// restore previous SVG mode: (in case we're exiting an SVG namespace)\n\tisSvgMode = prevSvgMode;\n\n\treturn out;\n}\n\n/** Apply child and attribute changes between a VNode and a DOM Node to the DOM.\n *\t@param {Element} dom\t\t\tElement whose children should be compared & mutated\n *\t@param {Array} vchildren\t\tArray of VNodes to compare to `dom.childNodes`\n *\t@param {Object} context\t\t\tImplicitly descendant context object (from most recent `getChildContext()`)\n *\t@param {Boolean} mountAll\n *\t@param {Boolean} isHydrating\tIf `true`, consumes externally created elements similar to hydration\n */\nfunction innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n\tvar originalChildren = dom.childNodes,\n\t    children = [],\n\t    keyed = {},\n\t    keyedLen = 0,\n\t    min = 0,\n\t    len = originalChildren.length,\n\t    childrenLen = 0,\n\t    vlen = vchildren ? vchildren.length : 0,\n\t    j,\n\t    c,\n\t    f,\n\t    vchild,\n\t    child;\n\n\t// Build up a map of keyed children and an Array of unkeyed children:\n\tif (len !== 0) {\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar _child = originalChildren[i],\n\t\t\t    props = _child['__preactattr_'],\n\t\t\t    key = vlen && props ? _child._component ? _child._component.__key : props.key : null;\n\t\t\tif (key != null) {\n\t\t\t\tkeyedLen++;\n\t\t\t\tkeyed[key] = _child;\n\t\t\t} else if (props || (_child.splitText !== undefined ? isHydrating ? _child.nodeValue.trim() : true : isHydrating)) {\n\t\t\t\tchildren[childrenLen++] = _child;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (vlen !== 0) {\n\t\tfor (var i = 0; i < vlen; i++) {\n\t\t\tvchild = vchildren[i];\n\t\t\tchild = null;\n\n\t\t\t// attempt to find a node based on key matching\n\t\t\tvar key = vchild.key;\n\t\t\tif (key != null) {\n\t\t\t\tif (keyedLen && keyed[key] !== undefined) {\n\t\t\t\t\tchild = keyed[key];\n\t\t\t\t\tkeyed[key] = undefined;\n\t\t\t\t\tkeyedLen--;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// attempt to pluck a node of the same type from the existing children\n\t\t\telse if (!child && min < childrenLen) {\n\t\t\t\t\tfor (j = min; j < childrenLen; j++) {\n\t\t\t\t\t\tif (children[j] !== undefined && isSameNodeType(c = children[j], vchild, isHydrating)) {\n\t\t\t\t\t\t\tchild = c;\n\t\t\t\t\t\t\tchildren[j] = undefined;\n\t\t\t\t\t\t\tif (j === childrenLen - 1) childrenLen--;\n\t\t\t\t\t\t\tif (j === min) min++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// morph the matched/found/created DOM child to match vchild (deep)\n\t\t\tchild = idiff(child, vchild, context, mountAll);\n\n\t\t\tf = originalChildren[i];\n\t\t\tif (child && child !== dom && child !== f) {\n\t\t\t\tif (f == null) {\n\t\t\t\t\tdom.appendChild(child);\n\t\t\t\t} else if (child === f.nextSibling) {\n\t\t\t\t\tremoveNode(f);\n\t\t\t\t} else {\n\t\t\t\t\tdom.insertBefore(child, f);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// remove unused keyed children:\n\tif (keyedLen) {\n\t\tfor (var i in keyed) {\n\t\t\tif (keyed[i] !== undefined) recollectNodeTree(keyed[i], false);\n\t\t}\n\t}\n\n\t// remove orphaned unkeyed children:\n\twhile (min <= childrenLen) {\n\t\tif ((child = children[childrenLen--]) !== undefined) recollectNodeTree(child, false);\n\t}\n}\n\n/** Recursively recycle (or just unmount) a node and its descendants.\n *\t@param {Node} node\t\t\t\t\t\tDOM node to start unmount/removal from\n *\t@param {Boolean} [unmountOnly=false]\tIf `true`, only triggers unmount lifecycle, skips removal\n */\nfunction recollectNodeTree(node, unmountOnly) {\n\tvar component = node._component;\n\tif (component) {\n\t\t// if node is owned by a Component, unmount that component (ends up recursing back here)\n\t\tunmountComponent(component);\n\t} else {\n\t\t// If the node's VNode had a ref function, invoke it with null here.\n\t\t// (this is part of the React spec, and smart for unsetting references)\n\t\tif (node['__preactattr_'] != null && node['__preactattr_'].ref) node['__preactattr_'].ref(null);\n\n\t\tif (unmountOnly === false || node['__preactattr_'] == null) {\n\t\t\tremoveNode(node);\n\t\t}\n\n\t\tremoveChildren(node);\n\t}\n}\n\n/** Recollect/unmount all children.\n *\t- we use .lastChild here because it causes less reflow than .firstChild\n *\t- it's also cheaper than accessing the .childNodes Live NodeList\n */\nfunction removeChildren(node) {\n\tnode = node.lastChild;\n\twhile (node) {\n\t\tvar next = node.previousSibling;\n\t\trecollectNodeTree(node, true);\n\t\tnode = next;\n\t}\n}\n\n/** Apply differences in attributes from a VNode to the given DOM Element.\n *\t@param {Element} dom\t\tElement with attributes to diff `attrs` against\n *\t@param {Object} attrs\t\tThe desired end-state key-value attribute pairs\n *\t@param {Object} old\t\t\tCurrent/previous attributes (from previous VNode or element's prop cache)\n */\nfunction diffAttributes(dom, attrs, old) {\n\tvar name;\n\n\t// remove attributes no longer present on the vnode by setting them to undefined\n\tfor (name in old) {\n\t\tif (!(attrs && attrs[name] != null) && old[name] != null) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = undefined, isSvgMode);\n\t\t}\n\t}\n\n\t// add new & update changed attributes\n\tfor (name in attrs) {\n\t\tif (name !== 'children' && name !== 'innerHTML' && (!(name in old) || attrs[name] !== (name === 'value' || name === 'checked' ? dom[name] : old[name]))) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n\t\t}\n\t}\n}\n\n/** Retains a pool of Components for re-use, keyed on component name.\n *\tNote: since component names are not unique or even necessarily available, these are primarily a form of sharding.\n *\t@private\n */\nvar components = {};\n\n/** Reclaim a component for later re-use by the recycler. */\nfunction collectComponent(component) {\n\tvar name = component.constructor.name;\n\t(components[name] || (components[name] = [])).push(component);\n}\n\n/** Create a component. Normalizes differences between PFC's and classful Components. */\nfunction createComponent(Ctor, props, context) {\n\tvar list = components[Ctor.name],\n\t    inst;\n\n\tif (Ctor.prototype && Ctor.prototype.render) {\n\t\tinst = new Ctor(props, context);\n\t\tComponent.call(inst, props, context);\n\t} else {\n\t\tinst = new Component(props, context);\n\t\tinst.constructor = Ctor;\n\t\tinst.render = doRender;\n\t}\n\n\tif (list) {\n\t\tfor (var i = list.length; i--;) {\n\t\t\tif (list[i].constructor === Ctor) {\n\t\t\t\tinst.nextBase = list[i].nextBase;\n\t\t\t\tlist.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inst;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n\n/** Set a component's `props` (generally derived from JSX attributes).\n *\t@param {Object} props\n *\t@param {Object} [opts]\n *\t@param {boolean} [opts.renderSync=false]\tIf `true` and {@link options.syncComponentUpdates} is `true`, triggers synchronous rendering.\n *\t@param {boolean} [opts.render=true]\t\t\tIf `false`, no render will be triggered.\n */\nfunction setComponentProps(component, props, opts, context, mountAll) {\n\tif (component._disable) return;\n\tcomponent._disable = true;\n\n\tif (component.__ref = props.ref) delete props.ref;\n\tif (component.__key = props.key) delete props.key;\n\n\tif (!component.base || mountAll) {\n\t\tif (component.componentWillMount) component.componentWillMount();\n\t} else if (component.componentWillReceiveProps) {\n\t\tcomponent.componentWillReceiveProps(props, context);\n\t}\n\n\tif (context && context !== component.context) {\n\t\tif (!component.prevContext) component.prevContext = component.context;\n\t\tcomponent.context = context;\n\t}\n\n\tif (!component.prevProps) component.prevProps = component.props;\n\tcomponent.props = props;\n\n\tcomponent._disable = false;\n\n\tif (opts !== 0) {\n\t\tif (opts === 1 || options.syncComponentUpdates !== false || !component.base) {\n\t\t\trenderComponent(component, 1, mountAll);\n\t\t} else {\n\t\t\tenqueueRender(component);\n\t\t}\n\t}\n\n\tif (component.__ref) component.__ref(component);\n}\n\n/** Render a Component, triggering necessary lifecycle events and taking High-Order Components into account.\n *\t@param {Component} component\n *\t@param {Object} [opts]\n *\t@param {boolean} [opts.build=false]\t\tIf `true`, component will build and store a DOM node if not already associated with one.\n *\t@private\n */\nfunction renderComponent(component, opts, mountAll, isChild) {\n\tif (component._disable) return;\n\n\tvar props = component.props,\n\t    state = component.state,\n\t    context = component.context,\n\t    previousProps = component.prevProps || props,\n\t    previousState = component.prevState || state,\n\t    previousContext = component.prevContext || context,\n\t    isUpdate = component.base,\n\t    nextBase = component.nextBase,\n\t    initialBase = isUpdate || nextBase,\n\t    initialChildComponent = component._component,\n\t    skip = false,\n\t    rendered,\n\t    inst,\n\t    cbase;\n\n\t// if updating\n\tif (isUpdate) {\n\t\tcomponent.props = previousProps;\n\t\tcomponent.state = previousState;\n\t\tcomponent.context = previousContext;\n\t\tif (opts !== 2 && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === false) {\n\t\t\tskip = true;\n\t\t} else if (component.componentWillUpdate) {\n\t\t\tcomponent.componentWillUpdate(props, state, context);\n\t\t}\n\t\tcomponent.props = props;\n\t\tcomponent.state = state;\n\t\tcomponent.context = context;\n\t}\n\n\tcomponent.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n\tcomponent._dirty = false;\n\n\tif (!skip) {\n\t\trendered = component.render(props, state, context);\n\n\t\t// context to pass to the child, can be updated via (grand-)parent component\n\t\tif (component.getChildContext) {\n\t\t\tcontext = extend(extend({}, context), component.getChildContext());\n\t\t}\n\n\t\tvar childComponent = rendered && rendered.nodeName,\n\t\t    toUnmount,\n\t\t    base;\n\n\t\tif (typeof childComponent === 'function') {\n\t\t\t// set up high order component link\n\n\t\t\tvar childProps = getNodeProps(rendered);\n\t\t\tinst = initialChildComponent;\n\n\t\t\tif (inst && inst.constructor === childComponent && childProps.key == inst.__key) {\n\t\t\t\tsetComponentProps(inst, childProps, 1, context, false);\n\t\t\t} else {\n\t\t\t\ttoUnmount = inst;\n\n\t\t\t\tcomponent._component = inst = createComponent(childComponent, childProps, context);\n\t\t\t\tinst.nextBase = inst.nextBase || nextBase;\n\t\t\t\tinst._parentComponent = component;\n\t\t\t\tsetComponentProps(inst, childProps, 0, context, false);\n\t\t\t\trenderComponent(inst, 1, mountAll, true);\n\t\t\t}\n\n\t\t\tbase = inst.base;\n\t\t} else {\n\t\t\tcbase = initialBase;\n\n\t\t\t// destroy high order component link\n\t\t\ttoUnmount = initialChildComponent;\n\t\t\tif (toUnmount) {\n\t\t\t\tcbase = component._component = null;\n\t\t\t}\n\n\t\t\tif (initialBase || opts === 1) {\n\t\t\t\tif (cbase) cbase._component = null;\n\t\t\t\tbase = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, true);\n\t\t\t}\n\t\t}\n\n\t\tif (initialBase && base !== initialBase && inst !== initialChildComponent) {\n\t\t\tvar baseParent = initialBase.parentNode;\n\t\t\tif (baseParent && base !== baseParent) {\n\t\t\t\tbaseParent.replaceChild(base, initialBase);\n\n\t\t\t\tif (!toUnmount) {\n\t\t\t\t\tinitialBase._component = null;\n\t\t\t\t\trecollectNodeTree(initialBase, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (toUnmount) {\n\t\t\tunmountComponent(toUnmount);\n\t\t}\n\n\t\tcomponent.base = base;\n\t\tif (base && !isChild) {\n\t\t\tvar componentRef = component,\n\t\t\t    t = component;\n\t\t\twhile (t = t._parentComponent) {\n\t\t\t\t(componentRef = t).base = base;\n\t\t\t}\n\t\t\tbase._component = componentRef;\n\t\t\tbase._componentConstructor = componentRef.constructor;\n\t\t}\n\t}\n\n\tif (!isUpdate || mountAll) {\n\t\tmounts.unshift(component);\n\t} else if (!skip) {\n\t\t// Ensure that pending componentDidMount() hooks of child components\n\t\t// are called before the componentDidUpdate() hook in the parent.\n\t\t// Note: disabled as it causes duplicate hooks, see https://github.com/developit/preact/issues/750\n\t\t// flushMounts();\n\n\t\tif (component.componentDidUpdate) {\n\t\t\tcomponent.componentDidUpdate(previousProps, previousState, previousContext);\n\t\t}\n\t\tif (options.afterUpdate) options.afterUpdate(component);\n\t}\n\n\tif (component._renderCallbacks != null) {\n\t\twhile (component._renderCallbacks.length) {\n\t\t\tcomponent._renderCallbacks.pop().call(component);\n\t\t}\n\t}\n\n\tif (!diffLevel && !isChild) flushMounts();\n}\n\n/** Apply the Component referenced by a VNode to the DOM.\n *\t@param {Element} dom\tThe DOM node to mutate\n *\t@param {VNode} vnode\tA Component-referencing VNode\n *\t@returns {Element} dom\tThe created/mutated element\n *\t@private\n */\nfunction buildComponentFromVNode(dom, vnode, context, mountAll) {\n\tvar c = dom && dom._component,\n\t    originalComponent = c,\n\t    oldDom = dom,\n\t    isDirectOwner = c && dom._componentConstructor === vnode.nodeName,\n\t    isOwner = isDirectOwner,\n\t    props = getNodeProps(vnode);\n\twhile (c && !isOwner && (c = c._parentComponent)) {\n\t\tisOwner = c.constructor === vnode.nodeName;\n\t}\n\n\tif (c && isOwner && (!mountAll || c._component)) {\n\t\tsetComponentProps(c, props, 3, context, mountAll);\n\t\tdom = c.base;\n\t} else {\n\t\tif (originalComponent && !isDirectOwner) {\n\t\t\tunmountComponent(originalComponent);\n\t\t\tdom = oldDom = null;\n\t\t}\n\n\t\tc = createComponent(vnode.nodeName, props, context);\n\t\tif (dom && !c.nextBase) {\n\t\t\tc.nextBase = dom;\n\t\t\t// passing dom/oldDom as nextBase will recycle it if unused, so bypass recycling on L229:\n\t\t\toldDom = null;\n\t\t}\n\t\tsetComponentProps(c, props, 1, context, mountAll);\n\t\tdom = c.base;\n\n\t\tif (oldDom && dom !== oldDom) {\n\t\t\toldDom._component = null;\n\t\t\trecollectNodeTree(oldDom, false);\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/** Remove a component from the DOM and recycle it.\n *\t@param {Component} component\tThe Component instance to unmount\n *\t@private\n */\nfunction unmountComponent(component) {\n\tif (options.beforeUnmount) options.beforeUnmount(component);\n\n\tvar base = component.base;\n\n\tcomponent._disable = true;\n\n\tif (component.componentWillUnmount) component.componentWillUnmount();\n\n\tcomponent.base = null;\n\n\t// recursively tear down & recollect high-order component children:\n\tvar inner = component._component;\n\tif (inner) {\n\t\tunmountComponent(inner);\n\t} else if (base) {\n\t\tif (base['__preactattr_'] && base['__preactattr_'].ref) base['__preactattr_'].ref(null);\n\n\t\tcomponent.nextBase = base;\n\n\t\tremoveNode(base);\n\t\tcollectComponent(component);\n\n\t\tremoveChildren(base);\n\t}\n\n\tif (component.__ref) component.__ref(null);\n}\n\n/** Base Component class.\n *\tProvides `setState()` and `forceUpdate()`, which trigger rendering.\n *\t@public\n *\n *\t@example\n *\tclass MyFoo extends Component {\n *\t\trender(props, state) {\n *\t\t\treturn <div />;\n *\t\t}\n *\t}\n */\nfunction Component(props, context) {\n\tthis._dirty = true;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.context = context;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.props = props;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.state = this.state || {};\n}\n\nextend(Component.prototype, {\n\n\t/** Returns a `boolean` indicating if the component should re-render when receiving the given `props` and `state`.\n  *\t@param {object} nextProps\n  *\t@param {object} nextState\n  *\t@param {object} nextContext\n  *\t@returns {Boolean} should the component re-render\n  *\t@name shouldComponentUpdate\n  *\t@function\n  */\n\n\t/** Update component state by copying properties from `state` to `this.state`.\n  *\t@param {object} state\t\tA hash of state properties to update with new values\n  *\t@param {function} callback\tA function to be called once component state is updated\n  */\n\tsetState: function setState(state, callback) {\n\t\tvar s = this.state;\n\t\tif (!this.prevState) this.prevState = extend({}, s);\n\t\textend(s, typeof state === 'function' ? state(s, this.props) : state);\n\t\tif (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n\t\tenqueueRender(this);\n\t},\n\n\n\t/** Immediately perform a synchronous re-render of the component.\n  *\t@param {function} callback\t\tA function to be called after component is re-rendered.\n  *\t@private\n  */\n\tforceUpdate: function forceUpdate(callback) {\n\t\tif (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n\t\trenderComponent(this, 2);\n\t},\n\n\n\t/** Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n  *\tVirtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n  *\t@param {object} props\t\tProps (eg: JSX attributes) received from parent element/component\n  *\t@param {object} state\t\tThe component's current state\n  *\t@param {object} context\t\tContext object (if a parent component has provided context)\n  *\t@returns VNode\n  */\n\trender: function render() {}\n});\n\n/** Render JSX into a `parent` Element.\n *\t@param {VNode} vnode\t\tA (JSX) VNode to render\n *\t@param {Element} parent\t\tDOM element to render into\n *\t@param {Element} [merge]\tAttempt to re-use an existing DOM tree rooted at `merge`\n *\t@public\n *\n *\t@example\n *\t// render a div into <body>:\n *\trender(<div id=\"hello\">hello!</div>, document.body);\n *\n *\t@example\n *\t// render a \"Thing\" component into #foo:\n *\tconst Thing = ({ name }) => <span>{ name }</span>;\n *\trender(<Thing name=\"one\" />, document.querySelector('#foo'));\n */\nfunction render(vnode, parent, merge) {\n  return diff(merge, vnode, {}, false, parent, false);\n}\n\nvar preact = {\n\th: h,\n\tcreateElement: h,\n\tcloneElement: cloneElement,\n\tComponent: Component,\n\trender: render,\n\trerender: rerender,\n\toptions: options\n};\n\nexport default preact;\nexport { h, h as createElement, cloneElement, Component, render, rerender, options };\n//# sourceMappingURL=preact.esm.js.map\n","import {h, Component} from 'preact'\r\n\r\nexport interface TileProps {\r\n    src: string\r\n    aspectRatio: number\r\n    top: number\r\n    left: number\r\n    width: number\r\n    height: number\r\n}\r\n\r\nexport class Tile extends Component<TileProps> {\r\n\r\n    render({src, aspectRatio, top, left, width, height}) {\r\n        const style = {\r\n            top,\r\n            left,\r\n            width,\r\n            height,\r\n            backgroundImage: `url(./${src})`\r\n        }\r\n        return <li style={style}/>\r\n    }\r\n}\r\n","/*!\n* screenfull\n* v3.3.2 - 2017-10-27\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\tvar keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit (Safari 5.1)\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (elem) {\n\t\t\tvar request = fn.requestFullscreen;\n\n\t\t\telem = elem || document.documentElement;\n\n\t\t\t// Work around Safari 5.1 bug: reports support for\n\t\t\t// keyboard in fullscreen even though it doesn't.\n\t\t\t// Browser sniffing, since the alternative with\n\t\t\t// setTimeout is even worse.\n\t\t\tif (/ Version\\/5\\.1(?:\\.\\d+)? Safari\\//.test(navigator.userAgent)) {\n\t\t\t\telem[request]();\n\t\t\t} else {\n\t\t\t\telem[request](keyboardAllowed && Element.ALLOW_KEYBOARD_INPUT);\n\t\t\t}\n\t\t},\n\t\texit: function () {\n\t\t\tdocument[fn.exitFullscreen]();\n\t\t},\n\t\ttoggle: function (elem) {\n\t\t\tif (this.isFullscreen) {\n\t\t\t\tthis.exit();\n\t\t\t} else {\n\t\t\t\tthis.request(elem);\n\t\t\t}\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = false;\n\t\t} else {\n\t\t\twindow.screenfull = false;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tenabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","export type Milliseconds = number\r\n\r\nexport interface Node {\r\n    x: number,\r\n    y: number,\r\n    width: number,\r\n    height: number,\r\n    aspectRatio?: number,\r\n    dummy?: boolean,\r\n    index?: number\r\n}\r\n\r\nexport interface MinMax {\r\n    min: number,\r\n    max: number\r\n}\r\n\r\nfunction shuffle<T>(array: T[]) {\r\n    let currentIndex: number = array.length,\r\n        temporaryValue: T,\r\n        randomIndex: number,\r\n        floor = Math.floor,\r\n        rnd = Math.random\r\n\r\n    while (0 !== currentIndex) {\r\n        randomIndex         = floor(rnd() * currentIndex)\r\n        currentIndex       -= 1\r\n        temporaryValue      = array[currentIndex]\r\n        array[currentIndex] = array[randomIndex]\r\n        array[randomIndex]  = temporaryValue\r\n    }\r\n\r\n    return array\r\n}\r\n\r\nexport function nextPowerOfTwo(v: number) {\r\n    v--\r\n    v |= v >> 1\r\n    v |= v >> 2\r\n    v |= v >> 4\r\n    v |= v >> 8\r\n    v |= v >> 16\r\n    v |= v >> 32\r\n    v++\r\n    return v\r\n}\r\n\r\nfunction getRandomInt(min, max) {\r\n    min = Math.ceil(min)\r\n    max = Math.floor(max)\r\n    return Math.floor(Math.random() * (max - min)) + min\r\n}\r\n\r\nexport function arrayReplaceIn<T>(src: T[], target: T[]) {\r\n    for (let i = 0; i < src.length; i++) {\r\n        target[i] = src[i]\r\n    }\r\n}\r\n\r\nexport function shuffleSlice<T>(arr: T[], start: number, end: number) {\r\n    let shuffled = shuffle(arr.slice(start, end))\r\n    return arrayReplaceIn(shuffled, arr)\r\n}\r\n\r\nexport function dummyArray(len: number): Node[] {\r\n    return Array.apply(null, Array(len)).map(x => ({\r\n        x: 0,\r\n        y: 0,\r\n        width: 0,\r\n        height: 0,\r\n        aspectRatio: 0,\r\n        dummy: true\r\n    }) as Node)\r\n}\r\n\r\nexport function calculateSizes(nodes: Node[], splits: number, nextPower: number, minmax: MinMax) {\r\n    let n1, n2, parent,\r\n        minFn = Math.min,\r\n        maxFn = Math.max,\r\n        d\r\n    for (let i = nextPower - 2; i >= 0; i--) {\r\n        d      = i << 1;\r\n        n1     = nodes[d]\r\n        n2     = nodes[d + 1]\r\n        parent = nodes[nextPower + i]\r\n        n1.x   = parent.x\r\n        n1.y   = parent.y\r\n        if (splits & (1 << i)) {\r\n            n1.width  = parent.width\r\n            n1.height = n1.aspectRatio ? parent.width / n1.aspectRatio : 0\r\n            n2.x      = parent.x\r\n            n2.y      = parent.y + n1.height\r\n            n2.width  = parent.width\r\n            n2.height = parent.height - n1.height\r\n        } else {\r\n            n1.width  = parent.height * n1.aspectRatio\r\n            n1.height = parent.height\r\n            n2.x      = parent.x + n1.width\r\n            n2.y      = parent.y\r\n            n2.width  = parent.width - n1.width\r\n            n2.height = parent.height\r\n        }\r\n        if (d < nextPower) {\r\n            let d1 = (n1.width + n1.height),\r\n                d2 = (n2.width + n2.height)\r\n            if (!n1.dummy) {\r\n                minmax.min = minFn(minmax.min, d1)\r\n            }\r\n            if (!n2.dummy) {\r\n                minmax.min = minFn(minmax.min, d2)\r\n            }\r\n            minmax.max = maxFn(minmax.max, d1, d2)\r\n        }\r\n    }\r\n}\r\n\r\nexport function searchSolution(\r\n    width: number,\r\n    height: number,\r\n    aspectRatios: number[],\r\n    searchTime: Milliseconds): Node[] {\r\n\r\n    const BIG = 999999999\r\n\r\n    let targetRatio      = width / height,\r\n        nextPower        = nextPowerOfTwo(aspectRatios.length),\r\n        fullArray        = dummyArray((nextPower << 1) - 1),\r\n        splitCache       = {},\r\n        endTime          = new Date().getTime() + searchTime,\r\n        previousMinScore = BIG,\r\n        splits:            number,\r\n        currentDifference: number,\r\n        winner:            Node[],\r\n        arrayHalf:         number,\r\n        wider:             boolean,\r\n        minmax:            MinMax,\r\n        a1, a2, a, i, l, last, d,\r\n        minAspectRatioThreshold = 0.05,\r\n        nodes = aspectRatios.map((r, idx) => ({\r\n            x:             0,\r\n            y:             0,\r\n            width:         0,\r\n            height:        0,\r\n            index:         idx,\r\n            aspectRatio:   r,\r\n            dummy:         false\r\n        }))\r\n\r\n    if (nextPower <= 5) {\r\n        minAspectRatioThreshold = BIG\r\n    }\r\n    const allowCropping = true\r\n\r\n    arrayReplaceIn(nodes, fullArray)\r\n    arrayHalf = 1 << nextPower\r\n    while (new Date().getTime() < endTime) {\r\n        splits = getRandomInt(0, arrayHalf)\r\n        if (splitCache[splits]) {\r\n            continue\r\n        }\r\n        splitCache[splits] = true\r\n        shuffleSlice(fullArray, 0, nextPower)\r\n        for (i = 0, l = nextPower - 1; i < l; i++) {\r\n            d  = (i << 1)\r\n            a1 = fullArray[d].aspectRatio\r\n            a2 = fullArray[d + 1].aspectRatio\r\n            if (a1 !== 0 && a2 !== 0) {\r\n                a = a1 + a2\r\n                if (splits & (1 << i)) {\r\n                    a = (a1 * a2) / a\r\n                }\r\n            } else {\r\n                a = a1 || a2\r\n            }\r\n            fullArray[i + nextPower].aspectRatio = a\r\n        }\r\n        wider = targetRatio > a\r\n        currentDifference = wider ? -1 + targetRatio / a : 1 - targetRatio / a\r\n        if (currentDifference < minAspectRatioThreshold) {\r\n            last = fullArray[fullArray.length - 1]\r\n            last.width  = wider ? height * a : width\r\n            last.height = wider ? height : width / a\r\n            minmax = {\r\n                min:  BIG,\r\n                max: -BIG\r\n            } as MinMax\r\n            calculateSizes(fullArray, splits, nextPower, minmax)\r\n            let score = currentDifference + (1 - minmax.min / minmax.max)\r\n            if (score < previousMinScore) {\r\n                previousMinScore = score\r\n                let arr = fullArray.slice(0, nextPower).filter(n => !n.dummy)\r\n                winner = arr.map(n => ({\r\n                    x:      n.x,\r\n                    y:      n.y,\r\n                    index:  n.index,\r\n                    width:  n.width,\r\n                    height: n.height\r\n                }))\r\n                if (allowCropping) {\r\n                    let scaleX = width / last.width\r\n                    let scaleY = height / last.height\r\n                    winner = winner.map(n => ({\r\n                        x:      n.x * scaleX,\r\n                        y:      n.y * scaleY,\r\n                        index:  n.index,\r\n                        width:  n.width * scaleX,\r\n                        height: n.height * scaleY\r\n                    }))\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return winner\r\n}\r\n","import {Component, h} from 'preact'\r\nimport {ImageWithRatio} from './start'\r\nimport {Tile, TileProps} from './tile'\r\nimport screenfull from 'screenfull'\r\nimport {searchSolution} from './layout'\r\nimport './diorama.css'\r\n\r\nexport interface DioramaProps {\r\n    images: ImageWithRatio[]\r\n}\r\n\r\nexport interface DioramaState {\r\n    showCrop: boolean\r\n    tileProps?: TileProps[]\r\n    images: number\r\n}\r\n\r\nexport class Diorama extends Component<DioramaProps, DioramaState> {\r\n\r\n    resizing = false\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            showCrop: false,\r\n            tileProps: [],\r\n            images: 9\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.calculatePositions()\r\n        window.addEventListener('resize', () => this.calculatePositions())\r\n    }\r\n\r\n    calculatePositions() {\r\n        if (this.resizing) {\r\n            return;\r\n        }\r\n        this.resizing = true\r\n        let w         = this.base.clientWidth,\r\n            h         = this.base.clientHeight,\r\n            tiles     = this.props.images.slice(0, this.state.images),\r\n            positions = []\r\n        do {\r\n            positions = searchSolution(w, h, tiles.map(tile => tile.aspectRatio), 100)\r\n        } while (!positions)\r\n        requestAnimationFrame(() => {\r\n            this.setState({\r\n                tileProps: positions.sort((a, b) => a.index - b.index).map(p => ({\r\n                    src: this.props.images[p.index].src,\r\n                    aspectRatio: this.props.images[p.index].aspectRatio,\r\n                    top: p.y,\r\n                    left: p.x,\r\n                    width: p.width,\r\n                    height: p.height\r\n                }))\r\n            })\r\n            this.resizing = false\r\n            this.forceUpdate()\r\n        })\r\n    }\r\n\r\n    shouldComponentUpdate() {\r\n        return false\r\n    }\r\n\r\n    crop = () => {\r\n        this.setState({showCrop: !this.state.showCrop})\r\n        this.forceUpdate()\r\n    }\r\n\r\n    recalc = () => {\r\n        this.calculatePositions()\r\n    }\r\n\r\n    add = () => {\r\n        this.setState({images: Math.min(this.props.images.length, this.state.images + 1)})\r\n        this.calculatePositions()\r\n    }\r\n\r\n    remove = () => {\r\n        this.setState({images: Math.max(5, this.state.images - 1)})\r\n        this.calculatePositions()\r\n    }\r\n\r\n    render(props, {tileProps, showCrop, images, ...state}) {\r\n        return (\r\n        <div className={`diorama ${showCrop ? 'crop' : ''}`}>\r\n            <ul>{tileProps.map(props => <Tile {...props}/>)}</ul>\r\n            <nav>\r\n                <button class=\"calc\" onClick={() => this.recalc()}>Recalculate</button>\r\n                <button class=\"crop-toggle\" onClick={() => this.crop()}>Show crop</button>\r\n                <button class=\"fullscreen\" onClick={() => screenfull.toggle()}>Fullscreen</button>\r\n                <button class=\"add-image\" onClick={() => this.add()}>Add</button>\r\n                <button class=\"del-image\" onClick={() => this.remove()}>Remove</button>\r\n            </nav>\r\n        </div>)\r\n    }\r\n\r\n}\r\n","import {images} from './images'\nimport {h, render} from 'preact'\nimport {Diorama} from './diorama'\n\nconst domReady = () => {\n    return new Promise((resolve) => {\n        document.addEventListener('DOMContentLoaded', () => {\n            resolve()\n        })\n    })\n}\n\nexport interface ImageWithRatio {\n    src: string,\n    aspectRatio: number\n}\n\nconst imageLoader = (src: string): Promise<ImageWithRatio> => {\n    return new Promise<ImageWithRatio>((resolve) => {\n        const img = new Image()\n        img.addEventListener('load', () => {\n            resolve({\n                src,\n                aspectRatio: img.width / img.height\n            })\n        })\n        img.src = src\n    })\n}\n\n(async () => {\n    const [loaded, ...imgWithRatios] = await Promise.all([domReady as any, ...images.map(imageLoader)])\n    render(<Diorama images={imgWithRatios}/>, document.body)\n})()\n"]}